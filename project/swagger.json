{
  "openapi": "3.0.0",
  "paths": {
    "/": {
      "get": {
        "operationId": "AppController_getHello",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "App"
        ]
      }
    },
    "/auth/register": {
      "post": {
        "operationId": "AuthController_register",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Registration successful"
          },
          "400": {
            "description": "Registration failed"
          },
          "409": {
            "description": "Email already in use"
          }
        },
        "summary": "Register a new user (staff)",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/login": {
      "post": {
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful"
          },
          "401": {
            "description": "Invalid email or password"
          }
        },
        "summary": "Login with email and password",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/login/oauth": {
      "post": {
        "operationId": "AuthController_oauthLogin",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OAuthLoginDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OAuth URL generated"
          },
          "400": {
            "description": "Invalid provider"
          }
        },
        "summary": "Initiate OAuth login flow",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/callback": {
      "get": {
        "operationId": "AuthController_oauthCallback",
        "parameters": [
          {
            "name": "provider",
            "required": true,
            "in": "query",
            "description": "OAuth provider (google, facebook, apple)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "code",
            "required": false,
            "in": "query",
            "description": "Authorization code",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "access_token",
            "required": false,
            "in": "query",
            "description": "Access token for implicit flow",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OAuth callback successful"
          },
          "400": {
            "description": "Missing provider or code/access_token"
          },
          "401": {
            "description": "Cannot authenticate with provider"
          }
        },
        "summary": "Handle OAuth callback",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/me": {
      "get": {
        "operationId": "AuthController_getProfile",
        "parameters": [],
        "responses": {
          "200": {
            "description": "User profile retrieved"
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Get authenticated user profile",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/verify-token": {
      "get": {
        "operationId": "AuthController_verifyToken",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Token is valid"
          },
          "401": {
            "description": "Unauthorized"
          }
        },
        "security": [
          {
            "bearer": []
          }
        ],
        "summary": "Verify JWT token",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/refresh": {
      "post": {
        "operationId": "AuthController_refreshToken",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refreshed successfully"
          },
          "400": {
            "description": "Missing refresh token"
          }
        },
        "summary": "Refresh JWT token",
        "tags": [
          "Auth"
        ]
      }
    },
    "/auth/supabase-login": {
      "post": {
        "operationId": "AuthController_supabaseLogin",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "access_token": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Supabase login successful"
          },
          "400": {
            "description": "Missing access token"
          }
        },
        "summary": "Login with Supabase token",
        "tags": [
          "Auth"
        ]
      }
    },
    "/users/me": {
      "get": {
        "operationId": "UserController_getProfile",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "User"
        ]
      },
      "put": {
        "operationId": "UserController_updateProfile",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "User"
        ]
      }
    },
    "/sos": {
      "post": {
        "operationId": "SosController_createEmergencyRequest",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateEmergencyRequestDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Sos"
        ]
      },
      "get": {
        "operationId": "SosController_getEmergencyRequests",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Sos"
        ]
      }
    },
    "/sos/{id}/assign": {
      "post": {
        "operationId": "SosController_assignToHospital",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Sos"
        ]
      }
    },
    "/sos/{id}/status": {
      "put": {
        "operationId": "SosController_updateStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateEmergencyStatusDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Sos"
        ]
      }
    },
    "/sos/all": {
      "get": {
        "operationId": "SosController_getAllEmergencyRequests",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Sos"
        ]
      }
    },
    "/sos/{id}": {
      "get": {
        "operationId": "SosController_getEmergencyRequestById",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Sos"
        ]
      }
    },
    "/sos/dashboard/active-emergencies": {
      "get": {
        "operationId": "SosController_getActiveEmergencies",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Sos"
        ]
      }
    },
    "/notifications": {
      "get": {
        "operationId": "NotificationController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Notification"
        ]
      }
    },
    "/notifications/{id}/read": {
      "put": {
        "operationId": "NotificationController_markAsRead",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Notification"
        ]
      }
    },
    "/notifications/read-all": {
      "put": {
        "operationId": "NotificationController_markAllAsRead",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Notification"
        ]
      }
    },
    "/notifications/{id}": {
      "delete": {
        "operationId": "NotificationController_deleteNotification",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Notification"
        ]
      }
    },
    "/hospitals": {
      "post": {
        "operationId": "HospitalController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateHospitalDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      },
      "get": {
        "operationId": "HospitalController_findAll",
        "parameters": [
          {
            "name": "search",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      }
    },
    "/hospitals/{id}": {
      "get": {
        "operationId": "HospitalController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      },
      "put": {
        "operationId": "HospitalController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateHospitalDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      },
      "delete": {
        "operationId": "HospitalController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      }
    },
    "/hospitals/{id}/capacity": {
      "put": {
        "operationId": "HospitalController_updateCapacity",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateHospitalCapacityDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      }
    },
    "/hospitals/{id}/accept-emergency": {
      "post": {
        "operationId": "HospitalController_acceptEmergency",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AcceptEmergencyDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      }
    },
    "/hospitals/nearby/{latitude}/{longitude}": {
      "get": {
        "operationId": "HospitalController_findNearbyHospitals",
        "parameters": [
          {
            "name": "latitude",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "longitude",
            "required": true,
            "in": "path",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "radius",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      }
    },
    "/hospitals/emergency-responses/{id}": {
      "put": {
        "operationId": "HospitalController_updateEmergencyResponseStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      },
      "get": {
        "operationId": "HospitalController_getEmergencyResponse",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      }
    },
    "/hospitals/emergency-responses/{id}/notify-rescue": {
      "post": {
        "operationId": "HospitalController_notifyRescueTeam",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      }
    },
    "/hospitals/emergency-responses/{id}/status": {
      "patch": {
        "operationId": "HospitalController_updateEmergencyResponseStatusManual",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Hospital"
        ]
      }
    },
    "/rescue-teams": {
      "post": {
        "operationId": "RescueController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRescueTeamDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Rescue"
        ]
      },
      "get": {
        "operationId": "RescueController_findAll",
        "parameters": [
          {
            "name": "search",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Rescue"
        ]
      }
    },
    "/rescue-teams/{id}": {
      "get": {
        "operationId": "RescueController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Rescue"
        ]
      },
      "put": {
        "operationId": "RescueController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRescueTeamDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Rescue"
        ]
      }
    },
    "/rescue-teams/{id}/status": {
      "put": {
        "operationId": "RescueController_updateStatus",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateRescueTeamStatusDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Rescue"
        ]
      }
    },
    "/rescue-teams/available": {
      "get": {
        "operationId": "RescueController_findAvailableTeams",
        "parameters": [
          {
            "name": "latitude",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "longitude",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "radius",
            "required": true,
            "in": "query",
            "schema": {
              "type": "number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Rescue"
        ]
      }
    },
    "/dashboard/stats": {
      "get": {
        "operationId": "DashboardController_getStats",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Dashboard"
        ]
      }
    },
    "/dashboard/active-emergencies": {
      "get": {
        "operationId": "DashboardController_getActiveEmergencies",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Dashboard"
        ]
      }
    },
    "/dashboard/team-locations": {
      "get": {
        "operationId": "DashboardController_getTeamLocations",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Dashboard"
        ]
      }
    },
    "/dashboard/hospital-capacities": {
      "get": {
        "operationId": "DashboardController_getHospitalCapacities",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "Dashboard"
        ]
      }
    },
    "/dashboard/assign-case": {
      "post": {
        "operationId": "DashboardController_assignCase",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignCaseDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Dashboard"
        ]
      }
    },
    "/dashboard/cancel-case": {
      "post": {
        "operationId": "DashboardController_cancelCase",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CancelCaseDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Dashboard"
        ]
      }
    }
  },
  "info": {
    "title": "Emergency Project API",
    "description": "API documentation for Emergency Project",
    "version": "1.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "securitySchemes": {
      "bearer": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http"
      }
    },
    "schemas": {
      "RegisterDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User email",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "description": "User password",
            "example": "password123"
          },
          "firstName": {
            "type": "string",
            "description": "User first name",
            "example": "John"
          },
          "lastName": {
            "type": "string",
            "description": "User last name",
            "example": "Doe"
          },
          "phone": {
            "type": "string",
            "description": "User phone number (optional)",
            "example": "1234567890"
          },
          "role": {
            "type": "string",
            "description": "User role",
            "enum": [
              "PATIENT",
              "EMERGENCY_CENTER",
              "HOSPITAL",
              "RESCUE_TEAM",
              "ADMIN"
            ],
            "example": "EMERGENCY_CENTER"
          }
        },
        "required": [
          "email",
          "password",
          "firstName",
          "lastName"
        ]
      },
      "LoginDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User email",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "description": "User password",
            "example": "password123"
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "OAuthLoginDto": {
        "type": "object",
        "properties": {
          "provider": {
            "type": "string",
            "description": "OAuth provider",
            "enum": [
              "google",
              "facebook",
              "apple"
            ]
          },
          "redirectUrl": {
            "type": "string",
            "description": "Redirect URL after login (optional)"
          }
        },
        "required": [
          "provider"
        ]
      },
      "RefreshTokenDto": {
        "type": "object",
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "Refresh token"
          }
        },
        "required": [
          "refreshToken"
        ]
      },
      "UpdateProfileDto": {
        "type": "object",
        "properties": {}
      },
      "CreateEmergencyRequestDto": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "description": "Description of the emergency"
          },
          "location": {
            "type": "string",
            "description": "Location address"
          },
          "latitude": {
            "type": "number",
            "description": "Latitude of the location"
          },
          "longitude": {
            "type": "number",
            "description": "Longitude of the location"
          },
          "grade": {
            "type": "string",
            "enum": [
              "CRITICAL",
              "URGENT",
              "NON_URGENT"
            ],
            "description": "Grade of the emergency"
          },
          "type": {
            "type": "string",
            "enum": [
              "ACCIDENT",
              "MEDICAL",
              "FIRE",
              "CRIME",
              "OTHER"
            ],
            "description": "Type of the emergency"
          },
          "medicalInfo": {
            "type": "object",
            "description": "Additional medical information"
          },
          "symptoms": {
            "description": "Symptoms reported",
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "patientId": {
            "type": "string",
            "description": "Patient ID (optional for EMERGENCY_CENTER)"
          }
        },
        "required": [
          "description",
          "grade",
          "type"
        ]
      },
      "UpdateEmergencyStatusDto": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "PENDING",
              "ASSIGNED",
              "IN_PROGRESS",
              "COMPLETED",
              "CANCELLED"
            ],
            "description": "New status of the emergency"
          },
          "notes": {
            "type": "string",
            "description": "Additional notes"
          }
        },
        "required": [
          "status"
        ]
      },
      "CreateHospitalDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateHospitalDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateHospitalCapacityDto": {
        "type": "object",
        "properties": {}
      },
      "AcceptEmergencyDto": {
        "type": "object",
        "properties": {}
      },
      "CreateRescueTeamDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateRescueTeamDto": {
        "type": "object",
        "properties": {}
      },
      "UpdateRescueTeamStatusDto": {
        "type": "object",
        "properties": {}
      },
      "AssignCaseDto": {
        "type": "object",
        "properties": {
          "caseId": {
            "type": "string"
          },
          "assignedToId": {
            "type": "string"
          }
        },
        "required": [
          "caseId",
          "assignedToId"
        ]
      },
      "CancelCaseDto": {
        "type": "object",
        "properties": {
          "caseId": {
            "type": "string"
          }
        },
        "required": [
          "caseId"
        ]
      }
    }
  }
}